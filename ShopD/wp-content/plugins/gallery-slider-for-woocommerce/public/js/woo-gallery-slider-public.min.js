!function($){"use strict";jQuery((function(){var settings=wcgs_ajax_object.wcgs_settings;function wcgs_slider_func(width){var width_unit=settings.gallery_responsive_width.unit;$("#wpgs-gallery").css("minWidth","auto").css("maxWidth",width+width_unit);var wcgs_img_count=$("#wpgs-gallery").find(".gallery-navigation-carousel .wcgs-thumb").length,thumbnails_item_to_show=parseInt(settings.thumbnails_item_to_show),adaptive_height="1"==settings.adaptive_height,accessibility="1"==settings.accessibility,pagination="1"==settings.pagination,navigation="1"==settings.navigation,slider_dir="1"==settings.slider_dir,infinite="1"==settings.infinite_loop,thumbnail_nav=1==settings.thumbnailnavigation,slide_orientation="vertical"==settings.slide_orientation,pagination_visibility,isPreloader;if(1==wcgs_img_count?$("#wpgs-gallery").find(".gallery-navigation-carousel").hide():$("#wpgs-gallery").find(".gallery-navigation-carousel").show(),$(".wcgs-carousel").show(),$(".wcgs-carousel").slick({slidesToShow:1,infinite:infinite,accessibility:accessibility,autoplay:!1,slidesToScroll:1,speed:300,rtl:slider_dir,rows:0,vertical:slide_orientation,adaptiveHeight:adaptive_height,arrows:navigation,fade:!1,dots:pagination,focusOnSelect:!0,asNavFor:".gallery-navigation-carousel",prevArrow:'<a class="slick-arrow-prev" data-role="none" aria-label="Prev slide"></a>',nextArrow:'<a class="slick-arrow-next" data-role="none" aria-label="Next slide"></a>'}),$(".gallery-navigation-carousel").slick({infinite:infinite,slidesToShow:thumbnails_item_to_show,slidesToScroll:1,asNavFor:".wcgs-carousel",vertical:!1,verticalSwiping:!1,centerMode:!1,centerPadding:"0",rtl:slider_dir,rows:0,arrows:thumbnail_nav,focusOnSelect:!0,prevArrow:'<a class="slick-nav-prev" data-role="none" aria-label="Prev slide"></a>',nextArrow:'<a class="slick-nav-next" data-role="none" aria-label="Next slide"></a>'}),$("body").hasClass("theme-savoy")){var slickArrow=[".slick-nav-prev",".slick-nav-next",".slick-arrow-prev",".slick-arrow-next"];$.each(slickArrow,(function(i,item){$("#wpgs-gallery "+item).addClass("slick-arrow")}))}"1"==settings.lightbox&&($("#wpgs-gallery .wcgs-carousel .wcgs-lightbox").length||$("#wpgs-gallery .wcgs-carousel .wcgs-slider-image").append('<div class="wcgs-lightbox top_right"><a href="javascript:;"><span class="fa fa-search"></span></a></div>')),"hover"==settings.pagination_visibility&&($("#wpgs-gallery .slick-dots").hide(),$("#wpgs-gallery .wcgs-carousel").hover((function(){$("#wpgs-gallery .slick-dots").show()}),(function(){$("#wpgs-gallery .slick-dots").hide()}))),1==settings.preloader&&($(".wcgs-gallery-preloader").length||$("#wpgs-gallery").append('<div class="wcgs-gallery-preloader"></div>'))}function videoIcon(){$(".wcgs-slider-image, .wcgs-thumb").each((function(){var icon;$(this).find("img").data("type")&&$(this).append('<div class="video-icon"></div>')}))}function dataZoom(){$(".wcgs-slider-image").hover((function(){$(this).attr("data-scale","1.5");var img=$(this).find("img").attr("src");$(this).attr("data-image",img)}))}function zoomFunction(){$(".wcgs-slider-image").on("mouseover",(function(){$(this).children(".photo").css({transform:"scale("+$(this).attr("data-scale")+")"})})).on("mouseout",(function(){$(this).children(".photo").css({transform:"scale(1)"})})).on("mousemove",(function(e){$(this).children(".photo").css({"transform-origin":(e.pageX-$(this).offset().left)/$(this).width()*100+"% "+(e.pageY-$(this).offset().top)/$(this).height()*100+"%"})})).each((function(){var photoLength;0===$(this).find(".photo").length&&$(this).append('<div class="photo"></div>').children(".photo").css({"background-image":"url("+$(this).find("img").attr("src")+")"})}))}function zoomEffect(){if($(window).width()<480&&1==settings.mobile_zoom)return"";$(document).on("click",".wcgs-slider-image",(function(){zoomFunction()})),$(".wcgs-slider-image").mouseenter((function(){zoomFunction()})),$(".wcgs-slider-image").mouseleave((function(){zoomFunction()}))}function wcgsLightbox(){var lightbox;if(1==settings.lightbox){var gl_btns=["zoom"];1==settings.gallery_fs_btn&&gl_btns.push("fullScreen"),1==settings.gallery_share&&gl_btns.push("share"),gl_btns.push("close"),$.fancybox.defaults.buttons=gl_btns;var counter=1==settings.l_img_counter;$(".wcgs-carousel").fancybox({selector:".wcgs-carousel .wcgs-slider-image:not(.slick-cloned)",backFocus:!1,caption:function(){var caption="";return 1==settings.lightbox_caption&&(caption=$(this).find("img").attr("alt")||""),caption},infobar:counter,buttons:gl_btns,loop:!0})}else $(".wcgs-carousel .wcgs-slider-image").removeAttr("data-fancybox href")}$(document).ready((function(){$(".wcgs-gallery-preloader").css("opacity",0),$(".wcgs-gallery-preloader").css("z-index",-99)}));var gallery_width=settings.gallery_width,woocommerce_single_product_width=$(".single-product .product").width();if($("body").hasClass("theme-flatsome"))var woocommerce_single_product_width=$(".single-product .product .row.content-row").width();var gallery_w=gallery_width*woocommerce_single_product_width/100-50,summary_w=(100-gallery_width)*woocommerce_single_product_width/100,gallery_divi_width;if($(window).width()>992&&$(".summary").css("maxWidth",summary_w),$(window).width()<992&&settings.gallery_responsive_width.width>0&&(gallery_w=settings.gallery_responsive_width.width),$(window).width()<768&&(gallery_w=settings.gallery_responsive_width.height),$(window).width()<480&&(gallery_w=settings.gallery_responsive_width.height2),$("body").hasClass("et_divi_builder")||$("body").hasClass("theme-Divi")){var gallery_divi_width=$(".et-db #et-boc .et-l .et_pb_gutters3 .et_pb_column_1_2").width();$.isNumeric(gallery_divi_width)&&(gallery_w=gallery_divi_width)}if($(".woocommerce-product-gallery").parents(".hestia-product-image-wrap").length){var gallery_hestia_width=$(".woocommerce-product-gallery").parents(".hestia-product-image-wrap").width();"number"==typeof gallery_hestia_width&&(gallery_w=gallery_hestia_width)}($("body").hasClass("et_divi_builder")||$("body").hasClass("theme-Divi"))&&("number"==typeof(gallery_divi_width=$(".et-db #et-boc .et-l .et_pb_gutters3 .et_pb_column_1_2").width())&&(gallery_w=gallery_divi_width));function wcgsGalleryClickEvents(){var lightbox=1==settings.lightbox,wcgs_img_count=$("#wpgs-gallery").find(".gallery-navigation-carousel .wcgs-slider-image:not(.slick-cloned)").length;lightbox&&wcgs_img_count>1&&$(".wcgs-carousel").on("afterChange",(function(event,slick,currentSlide,nextSlide){$(".wcgs-lightbox a").attr("data-fancybox-index",currentSlide+1)}))}wcgs_slider_func(gallery_w),$(window).on("load",(function(){$(".wcgs-gallery-preloader").css("opacity",0),$(".wcgs-gallery-preloader").css("z-index",-99)})),videoIcon(),"1"==wcgs_ajax_object.wcgs_settings.zoom&&(dataZoom(),zoomEffect()),wcgsLightbox(),$(document).on("change",".variations select",(function(){$(".wcgs-gallery-preloader").css("z-index",99),$(".wcgs-gallery-preloader").css("opacity",.5);var productID=$("#wpgs-gallery").data("id"),variationsArray=[];$(".variations tr").each((function(){var attributeName=$(this).find("select").data("attribute_name"),attributeValue=$(this).find("select").val();if(attributeValue){var variations={attributeName:attributeName,attributeValue:attributeValue};variationsArray.push(variations)}}));var data={nonce:wcgs_ajax_object.nonce,action:"wcgs_action",productID:productID,variationsArray:variationsArray};$.ajax({url:wcgs_ajax_object.ajax_url,data:data,type:"POST",success:function(response){var gallery;response.length>0&&($(".wcgs-carousel").slick("unslick"),$(".gallery-navigation-carousel").slick("unslick"),$("#wpgs-gallery .wcgs-carousel > *, #wpgs-gallery .gallery-navigation-carousel > *").remove(),response.forEach((function(item,index){if(null!=item){var caption=item.cap.length>0?item.cap:"",checkVideo;if(!!item.hasOwnProperty("video")){var regex=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/,video=item.video;if(regex.test(video)){var youtubeCheck=video.indexOf("youtub")>-1,vimeoCheck=video.indexOf("vimeo")>-1;if(youtubeCheck){var regExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,match,id=!(!(match=video.match(regExp))||11!=match[7].length)&&match[7];$("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><img style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="youtube" data-videoid="'+id+'" /><iframe frameborder="0"  src="https://www.youtube.com/embed/'+id+'" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true"></iframe></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="youtube" data-videoid="'+id+'" /></div>')}if(vimeoCheck){var regExp=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,match,id=(match=video.match(regExp))[5];$("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><img style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="vimeo" data-videoid="'+id+'" /><iframe src="https://player.vimeo.com/video/'+id+'" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="vimeo" data-videoid="'+id+'"   /></div>')}youtubeCheck||vimeoCheck||($("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><video controls><source src="'+video+'" type="video/mp4"></video><img  style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="html5video" data-videomp4="'+video+'" /></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="html5video" data-videomp4="'+video+'" /></div>'))}else $("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+item.url+'" data-fancybox="view"><img alt="'+caption+'" src="'+item.url+'" data-image="'+item.url+'" /></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" src="'+item.thumb_url+'" data-image="'+item.url+'" /></div>')}else $("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+item.url+'" data-fancybox="view"><img alt="'+caption+'" src="'+item.url+'" data-image="'+item.full_url+'" /></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" src="'+item.thumb_url+'" data-image="'+item.url+'" /></div>')}})),setTimeout((function(){wcgs_slider_func(gallery_w),wcgsGalleryClickEvents(),"1"==wcgs_ajax_object.wcgs_settings.zoom&&(dataZoom(),zoomEffect()),videoIcon(),wcgsLightbox(),$(".wcgs-gallery-preloader").css("z-index",-99),$(".wcgs-gallery-preloader").css("opacity",0)}),200))}})})),$(document).ajaxStart((function(){$(".wcgs-gallery-preloader").css("opacity",.8)})),$(document).ajaxComplete((function(){setTimeout(300,(function(){$(".wcgs-gallery-preloader").css("opacity",0),$(".wcgs-gallery-preloader").css("z-index",-99)}))})),$((function(){wcgsGalleryClickEvents()}))}))}(jQuery);